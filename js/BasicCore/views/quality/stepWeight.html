<div>
	<div>
		<div class="row">
			<div class="col-md-9 col-sm-9 col-xs-9 col-xs-offset-1 topcol" >
				<p class="toptitle" id="stepWeightHeader"></p>
			</div>
		</div>



        <div class="row rowstyle">
            <div class="col-md-12 col-xs-4 ffblue" >
                <p class="inputLeft"> Weight</p>
            </div>
            <div class="col-md-12 col-xs-6" >
				<input type="text" class="form-control py-0" id="stepWeightFruit"  placeholder="">

            </div>
            <div class="col-md-12 col-xs-2 ffwhite">
                <p style="margin:0p;margin-bottom:0px;padding-top:2px;padding-bottom:4px;color:#274775;padding-right:0px;">g </p>
            </div>
        </div>

       <div id="weightUploadNewImage" class="row" style="margin-top:15px; ">
            <div class="col-lg-offset-1 col-md-4 col-md-offset-1 col-sm-4 col-sm-offset-1 col-xs-6 col-xs-offset-1" style="/*padding-right:15px;*/background-color:#274775;border-radius:7px;text-align:center;font-size:15px;line-height:28px;margin-right:10px;">
                <p style="margin:0p;margin-bottom:0px;padding-top:4px;padding-bottom:4px;color:#fff;">Upload Image/Camera</p>
            </div>
        </div>



        <div class="row" style="margin-top:15px;">
            <div id="imageHolderWeight" class="col-md-12 col-xs-10 col-xs-offset-1" style="text-align:center;">
				<input type="file" name="fileToUpload" id="weightImgupload" style="display:none"/><input type= "hidden" id="weightImageRotationValue">
				<img onclick="weightTakepictureView();" id="weightFileToUploadSrc" src="assets/img/place_holder.jpg" class="img-fluid z-depth-4 placeholderImg fileToUploadSrc" alt="1" style="width:100%;border:3px #274775 solid;border-radius:10px;display:none">
				<div class="mask flex-center waves-effect waves-light">
					<p id="imageLabel"class="white-text" style="display:none">Weight</p>
				</div>
			</div>
        </div>

       <div id="weightRotateImageleft" class="row" style="margin-top:15px; display:none;">
            <div class="col-lg-offset-1 col-md-4 col-md-offset-1 col-sm-4 col-sm-offset-1 col-xs-4 col-xs-offset-4" style="/*padding-right:15px;*/background-color:#274775;border-radius:7px;text-align:center;font-size:15px;line-height:28px;margin-right:10px;">
                <p style="margin:0p;margin-bottom:0px;padding-top:4px;padding-bottom:4px;color:#fff;">Rotate Left</p>
            </div>
        </div>
        <div id="weightRotateImageright" class="row" style="margin-top:15px; display:none;">
            <div class="col-lg-offset-1 col-md-4 col-md-offset-1 col-sm-4 col-sm-offset-1 col-xs-4 col-xs-offset-4" style="/*padding-right:15px;*/background-color:#274775;border-radius:7px;text-align:center;font-size:15px;line-height:28px;margin-right:10px;">
                <p style="margin:0p;margin-bottom:0px;padding-top:4px;padding-bottom:4px;color:#fff;">Rotate Right</p>
            </div>
        </div>
        <div id="weightRotateImagereset" class="row" style="margin-top:15px;display:none;">
            <div class="col-lg-offset-1 col-md-4 col-md-offset-1 col-sm-4 col-sm-offset-1 col-xs-4 col-xs-offset-4" style="/*padding-right:15px;*/background-color:#274775;border-radius:7px;text-align:center;font-size:15px;line-height:28px;margin-right:10px;">
                <p style="margin:0p;margin-bottom:0px;padding-top:4px;padding-bottom:4px;color:#fff;">Rotate None</p>
            </div>
        </div>
        <div id="weightUploadNewImageAgain" class="row" style="margin-top:15px;display:none;">
            <div class="col-lg-offset-1 col-md-4 col-md-offset-1 col-sm-4 col-sm-offset-1 col-xs-4 col-xs-offset-4" style="/*padding-right:15px;*/background-color:#274775;border-radius:7px;text-align:center;font-size:15px;line-height:28px;margin-right:10px;">
                <p style="margin:0p;margin-bottom:0px;padding-top:4px;padding-bottom:4px;color:#fff;">Replace Img</p>
            </div>
        </div>

		<div class="row">
			<div class="col-md-9 col-sm-9 col-xs-9 col-xs-offset-1 midcol" >
				<h5 class="midTitle" id="stepWeightPuc">Grading</h5>
			</div>
		</div>
        <div class="form-inline marginLeft">

          <div class="form-check">
              <label class="form-check-label" for="exampleRadiosInline1">
                  <img class="selectImg" src="assets/img/green64x64.png">Green [7-10]
              </label>
              <input class="form-check-input stepWeightGrade" type="radio" name="stepWeightGrade" id="stepWeightGradingGreen" value="1">
          </div>
          <div class="form-check">

              <label class="form-check-label" for="exampleRadiosInline2">
                  <img class="selectImg" src="assets/img/amber64x64.png">Amber [4-6]
              </label>
              <input class="form-check-input stepWeightGrade" type="radio" name="stepWeightGrade" id="stepWeightGradingAmber" value="2">
          </div>
          <div class="form-check">
              <label class="form-check-label" for="exampleRadiosInline3">
                  <img class="selectImg" src="assets/img/red64x64.png">Red [1-3]
              </label>
             <input class="form-check-input stepWeightGrade" type="radio" name="stepWeightGrade" id="stepWeightGradingRed" value="3">
          </div>
        </div>
     </div>
    <br>

	<div class="topWarning"><p id="qcMsg"></p></div>
    <div class="form-row flex-center">

          <button type="button" eltarget = "dashboardContent" url="views/quality/stepType.html" id="stepWeightCancel" class="btn button btn-primary rounded">Back</button>

          <button action ="stepWeightNext" type="button" eltarget = "dashboardContent" url="views/quality/stepPressure.html" id="stepWeightNext" class="btn button btn-primary rounded">Next : Pressure</button>
    </div>
    <div class="spacer"></div>
		<div id="debug"></div>

</div>
<script>
$(document).ready(function(){
  var gradeValue = contianerDetails.puc[currentPucCount].weight_grading;
	if(gradeValue == 1){
		$('#stepWeightGradingGreen').prop('checked', true);
	}
	if(gradeValue == 2){
		$('#stepWeightGradingAmber').prop('checked', true);
	}
	if(gradeValue == 3){
		$('#stepWeightGradingRed').prop('checked', true);
	}


  $('#stepWeightHeader').html('Step 2: Weight </br>PUC# ' +contianerDetails.puc[currentPucCount].number);
  $('#stepWeightFruit').val(contianerDetails.puc[currentPucCount].weight);
  $('#weightImageRotationValue').val(contianerDetails.puc[currentPucCount].weight_image_orientation);

  if(contianerDetails.puc[currentPucCount].weight_image_temp_data != ""){
    $('#weightFileToUploadSrc').attr('src', contianerDetails.puc[currentPucCount].weight_image_temp_data);
	  $('#weightRotateImageleft').show();
	  $('#weightRotateImageright').show();
	  $('#weightRotateImagereset').show();
	  $('#weightUploadNewImageAgain').show();
	  $('#weightFileToUploadSrc').show();
	  $('#weightUploadNewImage').hide();

	  $('#imageLabel').show();
	  if (contianerDetails.puc[currentPucCount].weight_image_orientation != '00')
	  {
		setImageCSS('weightFileToUploadSrc','imageHolderWeight','weightImageRotationValue',1); // The "1" indicates to the function that this is a reload (from back button)
		}
	}

  $('#weightFileToUploadSrc').css({
      "-webkit-transform": "rotate(" + contianerDetails.puc[currentPucCount].weight_image_orientation + "deg)",
      "-moz-transform": "rotate(" + contianerDetails.puc[currentPucCount].weight_image_orientation + "deg)",
      "transform": "rotate(" + contianerDetails.puc[currentPucCount].weight_image_orientation + "deg)"
      /* For modern browsers(CSS3)  */
  });

  var top=0;
  $('#weightRotateImageleft').click(function(){

  setImageCSS('weightFileToUploadSrc','imageHolderWeight','weightImageRotationValue',0);

      $('#weightFileToUploadSrc').css({
          "-webkit-transform": "rotate(270deg)",
          "-moz-transform": "rotate(270deg)",
          "transform": "rotate(270deg)" /* For modern browsers(CSS3)  */
      });
      $('#weightImageRotationValue').val('270');
	  contianerDetails.puc[currentPucCount].weight_image_orientation = $('#weightImageRotationValue').val();
  });
  $('#weightRotateImagereset').click(function(){

  resetImageCSS("weightFileToUploadSrc","imageHolderWeight");

      $('#weightFileToUploadSrc').css({
          "-webkit-transform": "rotate(00deg)",
          "-moz-transform": "rotate(00deg)",
          "transform": "rotate(00deg)" /* For modern browsers(CSS3)  */
      });
      $('#weightImageRotationValue').val('00');
	  contianerDetails.puc[currentPucCount].weight_image_orientation = $('#weightImageRotationValue').val();
  });
  $('#weightRotateImageright').click(function(){

  setImageCSS('weightFileToUploadSrc','imageHolderWeight','weightImageRotationValue',0);

      $('#weightFileToUploadSrc').css({
          "-webkit-transform": "rotate(90deg)",
          "-moz-transform": "rotate(90deg)",
          "transform": "rotate(90deg)", /* For modern browsers(CSS3)  */
      });

      $('#weightImageRotationValue').val('90');
	  contianerDetails.puc[currentPucCount].weight_image_orientation = $('#weightImageRotationValue').val();
  });

  $('#weightUploadNewImage').click(function(){
	   resetImageCSS("weightFileToUploadSrc","imageHolderWeight");
	   $('#weightRotateImagereset').trigger('click');
	   $('#weightImgupload').trigger('click');
  });

  $('#weightUploadNewImageAgain').click(function(){
		resetImageCSS("weightFileToUploadSrc","imageHolderWeight");
		$('#weightRotateImagereset').trigger('click');
		$('#weightImgupload').trigger('click');
  });

  function readURL(input) {

    if (input.files && input.files[0]) {
      var reader = new FileReader();

      reader.onload = function(e) {
        $('#weightFileToUploadSrc').attr('src', e.target.result);
        contianerDetails.puc[currentPucCount].weight_image_temp_data = e.target.result;
        weight_file = $('#weightImgupload').prop('files')[0];
				//$('#debug').html(e.target.result);
      }

	  $('#weightRotateImageleft').show();
	  $('#weightRotateImageright').show();
	  $('#weightRotateImagereset').show();
	  $('#weightUploadNewImageAgain').show();
	  $('#weightFileToUploadSrc').show();
	  $('#weightUploadNewImage').hide();

	  $('#imageLabel').show();


      reader.readAsDataURL(input.files[0]);
    }
  }
  $("#weightImgupload").change(function() {

    readURL(this);
  });

  function weightTakepictureView() {
   $('#weightImgupload').trigger('click');
  }

  $(window).scroll(function(){
    var st=$(this).scrollTop();
    if($(window).scrollTop() + window.innerHeight == $(document).height()){
      //$("#stepWeightScrollDownArrow").css("display","none");

    }else{
       //$("#stepWeightScrollDownArrow").css("display","block");

    }
  });
});
</script>
